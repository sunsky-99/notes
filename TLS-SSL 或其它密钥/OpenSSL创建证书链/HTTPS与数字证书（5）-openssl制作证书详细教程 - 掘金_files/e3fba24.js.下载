(window.webpackJsonp=window.webpackJsonp||[]).push([[41,327,330],{1006:function(e,t,n){"use strict";var r,o;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),function(e){e.header="1",e.footer="2",e.feed="3",e.collect="4",e.comment="5",e.code="6"}(r||(r={})),function(e){e.auto="1",e.hover="2"}(o||(o={}))},1153:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return T}));n(22);var r=n(4),o=n(5),c=n(8),l=n(83),d=n(28),h=n(18),f=n(186),v=n(66);function m(e){var t=Object(f.i)({maxDurationMS:9e4}),n=t.stayDuration,h=t.isCancelled,v=t.cancel;function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ViewContent,item_id:t});case 5:(n=e.sent).err_no!==c.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):v(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("error reportViewContentJScore err:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(o.z)((function(){n.value>=9e4&&function(e){m.apply(this,arguments)}(e)}))}function w(){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],n=t?Object(v.f)(sessionStorage.getItem(h.b.reportBindPhoneJScore)||"null"):{growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.BindPhone,item_id:"0"}){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t||sessionStorage.setItem(h.b.reportBindPhoneJScore,JSON.stringify(n)),e.next=8,l.a.AddPointReport(n);case 8:(r=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(r.err_msg)),sessionStorage.removeItem(h.b.reportBindPhoneJScore),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.warn("error reportBindPhoneJScore, set to sessionStorage, ".concat(JSON.stringify(n)," err:"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}function _(){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportUploadAvatarJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(){return C.apply(this,arguments)}function C(){return(C=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportModifyScreenNameJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},1289:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(7),n(22);var r=n(4),o=n(8),c=n(105),l=n(18),d=n(15),h=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",setTimeout((function(){return Promise.resolve()}),t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function f(e){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||Object(d.h)()){e.next=17;break}if(localStorage.getItem(l.a.userFirstVisitDispatchCoupon)!==t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,c.a.UserCouponReceiveDiscountFirstOrder({},{showError:!1});case 7:if((null==(n=e.sent)?void 0:n.err_no)!==o.ERROR_NO.OK){e.next=12;break}return localStorage.setItem(l.a.userFirstVisitDispatchCoupon,t),e.next=12,h();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error("userFirstVisitDispatchCoupon api request error:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}},2594:function(e,t,n){},2595:function(e,t,n){},3882:function(e,t,n){n(19),n(17),n(14),n(7),n(16);var r=n(126),o=n(164);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,h=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,w=void 0===m?{}:m,O=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[h,f],style:[style,v],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w)},O),d.concat([n("circle",{attrs:{cx:"12",cy:"12",r:"11",fill:"black","fill-opacity":"0.4"}}),n("circle",{attrs:{cx:"12",cy:"12",r:"11.5",stroke:"white","stroke-opacity":"0.4"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.96924 8.24087C8.76787 8.0395 8.4414 8.0395 8.24003 8.24087C8.03867 8.44223 8.03867 8.76871 8.24003 8.97007L11.2919 12.022L8.02407 15.2898C7.82271 15.4912 7.82271 15.8177 8.02407 16.019C8.22543 16.2204 8.55191 16.2204 8.75327 16.019L12.0211 12.7512L15.289 16.019C15.4904 16.2204 15.8168 16.2204 16.0182 16.019C16.2196 15.8177 16.2196 15.4912 16.0182 15.2898L12.7503 12.022L15.8022 8.97007C16.0036 8.76871 16.0036 8.44223 15.8022 8.24087C15.6009 8.0395 15.2744 8.0395 15.073 8.24087L12.0211 11.2928L8.96924 8.24087Z",fill:"white","fill-opacity":"0.9"}})]))}}},3883:function(e,t,n){"use strict";n(2594)},3884:function(e,t,n){"use strict";n(2595)},4385:function(e,t,n){"use strict";n.r(t);n(19),n(17),n(14),n(7),n(16),n(112),n(65),n(94),n(38),n(39),n(46);var r=n(0),o=(n(22),n(4)),c=n(5),l=n(73),d=n(52),h=n.n(d),f=n(89),v=n(83),m=n(1289),w=n(9),O=n(3882),_=n.n(O),y=n(18),T=n(3),C=Object(w.d)({components:{CloseIcon:_.a},emits:["show"],setup:function(e,t){var n=t.root,r=t.emit,l=[{name:"timelineIndex",alias:"home",traceShowKey:"ad_web_pop_show",traceClickKey:"ad_web_pop_click"},{name:"column",alias:"post",traceShowKey:"ad_web_article_pop_show",traceClickKey:"ad_web_article_pop_click"}],d=Object(c.v)(),f=Object(w.r)(),v=function(){var e=localStorage.getItem(y.a.showAdTccModal)||"[]",t=[];try{var n=JSON.parse(e);Array.isArray(n)&&(t=n)}catch(e){console.error(e),t=[]}return t},m=function(){return l.filter((function(e){return e.name===(d.value.name||"")}))},O=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,o,c,l,d,w,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$device.isDesktop){e.next=2;break}return e.abrupt("return");case 2:if(!(c=m()).length){e.next=13;break}return e.next=6,n.$store.dispatch(T.TCC_CONFIG,"juejin_config_web_ad_home_post");case 6:l=e.sent,d=(null===(t=l)||void 0===t?void 0:t[c[0].alias])||[],w=Date.now()/1e3,(O=d.filter((function(e){return w>h()(e.startTime).unix()&&w<h()(e.endTime).unix()}))).length&&!v().includes("".concat((null===(o=O[0])||void 0===o?void 0:o.id)||""))&&(r("show"),f.value=O[0],_(c[0].traceShowKey)),e.next=14;break;case 13:f.value&&(f.value=void 0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(w.x)((function(){return d.value.name}),(function(){O()})),Object(w.m)((function(){O()}));var _=function(e){var t,r;e&&n.$TEA(e,{id:(null===(t=f.value)||void 0===t?void 0:t.id)||"",ad_url:(null===(r=f.value)||void 0===r?void 0:r.url)||""})},C=function(e){var t,r,o;n.$TEA(null===(t=m()[0])||void 0===t?void 0:t.traceClickKey,{id:(null===(r=f.value)||void 0===r?void 0:r.id)||"",ad_url:(null===(o=f.value)||void 0===o?void 0:o.url)||"",click_type:e})};return{activeAd:f,closeAd:function(){var e;localStorage.setItem(y.a.showAdTccModal,JSON.stringify(v().concat(["".concat((null===(e=f.value)||void 0===e?void 0:e.id)||"")]))),C("skip"),f.value=void 0},handleClick:function(){C("enter"),window.open(f.value.url,"_blank")}}}}),R=(n(3883),n(29)),j=Object(R.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activeAd?n("div",{staticClass:"poster-wrap",on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[n("div",{staticClass:"poster-close-wrap",on:{click:function(t){return t.stopPropagation(),e.closeAd(t)}}},[n("CloseIcon",{staticClass:"poster-close-icon"})],1),e._v(" "),n("div",{staticClass:"poster-img-wrap"},[n("img",{staticClass:"poster-img",attrs:{src:e.activeAd.imgUrl}})]),e._v(" "),n("div",{staticClass:"poster-title"},[e._v(e._s(e.activeAd.title))])]):e._e()}),[],!1,null,"144bae02",null).exports,k=n(1006),S=n(888),x=n(880),P=n(20);var E=n(102),M=n(66),I=n(171),L=n(31),A=n(44),D=n(1153),F=n(241);function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var N=0,B=["/bind","/login","/mobile/lottery","/mobile/lottery/welfare","/getting-started","/app","/delete/account","/mobile/bugfix","/bugfix/rank","/challenge/1","/challenge/1/detail"],$=Object(c.b)({components:{AlertList:function(){return n.e(176).then(n.bind(null,4403))},ErrorView:function(){return Promise.resolve().then(n.bind(null,421))},BindPhoneModal:function(){return n.e(30).then(n.bind(null,4296))},NewUserLead:function(){return n.e(127).then(n.bind(null,4382))},PinModal:function(){return n.e(68).then(n.bind(null,4456))},AuthModal:function(){return n.e(15).then(n.bind(null,4295))},SuspensionPanel:function(){return n.e(148).then(n.bind(null,1617))},ActivityRecommend:function(){return n.e(208).then(n.bind(null,4457))},AccountDeleteModal:function(){return n.e(169).then(n.bind(null,2769))},VipBorrowModal:function(){return n.e(181).then(n.bind(null,4413))},UserGrowthLead:function(){return n.e(109).then(n.bind(null,4380))},UserGrowthPopup:function(){return n.e(131).then(n.bind(null,4458))},UpgradeBox:function(){return n.e(173).then(n.bind(null,4459))},Report:function(){return Promise.all([n.e(334),n.e(124)]).then(n.bind(null,4414))},LoginGuide:function(){return n.e(29).then(n.bind(null,4450))},HomePostTccAd:j,FixedResourceTccConfig:function(){return n.e(190).then(n.bind(null,4460))},DarkModeNotification:function(){return n.e(180).then(n.bind(null,4461))},RiskModal:function(){return n.e(198).then(n.bind(null,4462))}},setup:function(e,t){var n=t.root,r=Object(c.x)(),d=Object(c.w)(),h=Object(x.a)().doFollow;r.dispatch(T.LOAD_THEME);var f=Object(S.b)(n),m=f.showReportModal,w=f.reportModalData,O=Object(E.d)(y.a.juejinDarkNotification)[y.a.juejinDarkNotification],_=Object(E.b)(y.a.juejinDarkNotification).handleJuejinDarkNotificationDismiss,C=Object(c.a)((function(){return Object(P.h)(d.currentRoute.fullPath)}));Object(c.j)((function(){var e,t,o=n.$getBean("eventBus");o.onVmLife(n,o.eventType.REPORT_CONTENT,m),!C.value&&(null===(t=null===(e=r.state.auth)||void 0===e?void 0:e.user)||void 0===t?void 0:t.user_id)&&(r.dispatch(T.FETCH_ORE_COUNT),r.dispatch(T.FETCH_AVATAR_MENU_INFO),v.a.CompleteTask().catch((function(){}))),Object(D.a)(!0)}));var style=Object(c.a)((function(){var e;return null===(e=n.$store.getters[T.TCC_STYLE])||void 0===e?void 0:e.trim()})),script=Object(c.a)((function(){var e;return null===(e=n.$store.getters[T.TCC_SCRIPT])||void 0===e?void 0:e.trim()})),R=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:script.value&&((t=document.createElement("script")).innerHTML=script.value,document.documentElement.appendChild(t)),style.value&&((n=document.createElement("style")).innerHTML=style.value,document.head.appendChild(n));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.j)(Object(o.a)(regeneratorRuntime.mark((function e(){var t,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$store.dispatch(T.TCC_CONFIG),!(null===(t=r.state.auth)||void 0===t?void 0:t.user)){e.next=13;break}if(o=localStorage.getItem(y.a.autoFollowUser),localStorage.removeItem(y.a.autoFollowUser),!o){e.next=11;break}if(!(c=Object(M.f)(o,(function(e){return"number"==typeof(null==e?void 0:e.expire)&&e.expire>Date.now()})))){e.next=11;break}return e.next=9,h(c.itemId,c.itemType,{teaFollowType:c.teaFollowType});case 9:(d=e.sent)&&d.isSuccess&&l.Message.success("关注成功");case 11:e.next=15;break;case 13:Object(M.f)(localStorage.getItem(y.a.autoFollowUser),(function(e){return"number"==typeof(null==e?void 0:e.expire)&&e.expire>Date.now()}))||localStorage.removeItem(y.a.autoFollowUser);case 15:case"end":return e.stop()}}),e)})))),Object(c.y)([style,script],(function(){R()})),function(e){var t=Object(c.x)(),n=Object(c.w)(),r=Object(c.a)((function(){var e;return null===(e=t.state.auth)||void 0===e?void 0:e.userInitiated})),o=Object(c.a)((function(){var e;return null===(e=t.state.auth)||void 0===e?void 0:e.user})),l=Object(c.a)((function(){return Object(P.h)(n.currentRoute.fullPath)}));Object(c.y)(r,(function(t){l.value&&t&&e(!!o.value)}),{immediate:!0})}((function(e){e&&(r.dispatch(T.FETCH_ORE_COUNT),r.dispatch(T.FETCH_AVATAR_MENU_INFO),v.a.CompleteTask())})),V(V({},Object(E.c)()),{},{reportModalData:w,darkModeVisible:O,onDarkNotificationClose:_})},data:function(){return{visibleAuthForm:null,isSuspensionPanelVisible:!1,isAlertListVisible:!1,newuserTicket:!1,isVisiblePinEditor:!1,isBindPhoneNumberModalVisible:!1,captchaType:"SLIDE",verifyCallback:"",bindPhoneMsg:"",to:"",isLogoutModalVisible:!1,UserLeadPopupShowed:!1,isFromMainPageSigninClick:!1,enter_method:"",newLeadVisibility:!1,bindPhoneOption:{},popupMutex:!1,isShowVipBorrow:!1,vipTeaParams:{},bookInfo:{},hideRecommendComponent:!1,closeRedirectParams:null,loginGuideFooterVisible:!1,hasTccAd:!1}},computed:V(V({},Object(f.mapGetters)({user:T.USER,activity:T.ACTIVITY,logined:T.LOGINED,unreadNotificationCount:T.UNREAD_NOTIFICATION_COUNT,errorView:T.ERROR_VIEW,statusCode:T.STATUS_CODE,needSuspension:T.NEED_SUSPENSION,needRiskModal:T.NEED_RISK_MODAL,userInitiated:T.USER_INITIATED})),{},{displayedUnreadNotificationAmount:function(){return Object(F.c)(this.unreadNotificationCount.total)},titleTemplate:function(){return this.displayedUnreadNotificationAmount?"(".concat(this.displayedUnreadNotificationAmount,") %s - 掘金"):"%s - 掘金"},date:function(){return Object(L.b)(new Date,"MMDD")},recommendComponent:function(){var e;return this.hideRecommendComponent||["login","lognIndex","bindIndex","offer","presalePay","presaleIndex","presaleResult","vipIndex","vipPayResult","membership","membershipHome","integral","property","mall"].includes(this.$route.name)||this.$route.path.startsWith("/creator")?null:1===(null===(e=this.activity[2020])||void 0===e?void 0:e.is_show)?"ActivityRecommend":null},isPathExcluded:function(){var path=this.$router.currentRoute.path;return B.some((function(e){return e===path}))}}),watch:{visibleAuthForm:function(e){this.visibleMobileExtension(!e)},user:function(e){var t=this.$route.name||"";("courseIndex"!==t||this.$route.path.includes("bytetech"))&&(["bookInfo","column"].includes(t)||Object(m.a)((null==e?void 0:e.user_id)||""))},$route:function(){this.checkLogin(),this.handleLeadModal(),this.modalStyleTimer&&clearTimeout(this.modalStyleTimer),this.modalStyleTimer=setTimeout((function(){document.body.style.overflow="",document.body.style.paddingRight=""}),300)},userInitiated:{handler:function(e){var t=this;if(e&&(this.handleLeadModal(),this.checkLogin(),this.$device.isDesktop)){var n=localStorage.getItem("juejin_2608_theme")||"{}",r=JSON.parse(n),o=r.theme,c=void 0===o?"light":o,l=r.isFollowSystem,d=void 0!==l&&l;this.$TEA("current_theme",{theme:c,isFollowSystem:d});var f=this.$getBean("eventBus");f.onVmLife(this,f.eventType.HEADER_NAV_VISIBILITY_CHANGE,(function(e){var n=e.visible,r=window.localStorage.getItem(y.a.loginGuideFooterTime);t.user||n||t.recommendComponent||t.hasTccAd||h()().isSame(r,"day")||(t.loginGuideFooterVisible=!0,t.$TEA("login_guide_show",{from:k.a.footer,type:k.b.auto}),window.localStorage.setItem(y.a.loginGuideFooterTime,h()().format("YYYY-MM-DD")))}))}},immediate:!0}},mounted:function(){N=new Date,this.initEventListener(),this.mountAlertList(),this.mountSuspensionPanel(),this.$store.dispatch(T.ACTIVITY),this.modalStyleTimer=null,"1"!==window.sessionStorage.getItem("IS_DELETE")||this.popupMutex||this.isPathExcluded||(this.isLogoutModalVisible=!0,this.popupMutex=!0,window.sessionStorage.removeItem("IS_DELETE"))},beforeDestroy:function(){Object(A.q)(this.handleVisibilityChange),this.modalStyleTimer&&clearTimeout(this.modalStyleTimer)},methods:V(V({},Object(f.mapActions)({fetchCurrentUser:T.FETCH_CURRENT_USER})),{},{visibleMobileExtension:function(e){var t=document.getElementById("mobile-newuser-ticket");null!==t&&(t.style.opacity=Number(e))},checkLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.getters.USER){t.next=6;break}return t.next=3,e.$store.dispatch(T.TCC_CONFIG,"juejin_login_config");case 3:c=t.sent,(null==(l=null===(o=null===(r=null===(n=c)||void 0===n?void 0:n.mustLogin)||void 0===r?void 0:r.bookIds)||void 0===o?void 0:o.map((function(e){return{reg:new RegExp("^/((book)|(video))/(m/)?".concat(e,"/section/\\d+$")),id:e}})))?void 0:l.length)&&window.location.pathname&&l.forEach((function(t){var n=t.reg,r=t.id;n.test(window.location.pathname)&&e.$requestLogin({closeRedirectParams:{name:"bookInfo",params:{id:r}}})}));case 6:case"end":return t.stop()}}),t)})))()},handleLeadModal:function(){var e;this.$device.isDesktop&&(null===(e=this.user)||void 0===e?void 0:e.need_lead)&&"timelineIndex"===this.$route.name&&(this.popupMutex||(this.newLeadVisibility=!0,this.popupMutex=!0))},initEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType;t.onVmLife(this,n.VISIBLE_LOGOUT_MODAL,(function(){e.isLogoutModalVisible=!0})),t.onVmLife(this,n.REQUEST_LOGIN,(function(t){var n=t||{},r=n.click,o=void 0!==r&&r,c=n.enterMethod,l=n.closeRedirectParams,d=n.successRedirectUrl;e.isFromMainPageSigninClick=o,e.enter_method=c,e.visibleAuthForm="login-with-phone",e.newuserTicket=null,e.closeRedirectParams=l||null,e.to=d||""})),t.onVmLife(this,n.SHOW_VIP_BORROW_MODAL,(function(t,n){e.isShowVipBorrow=!0,e.bookInfo=t,e.vipTeaParams=n})),t.onVmLife(this,n.REQUEST_LOGIN_REDIRECT,(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;e.isFromMainPageSigninClick=t,e.enter_method=n,e.visibleAuthForm="login-with-phone",e.newuserTicket=null,e.to=r})),t.onVmLife(this,n.REQUEST_REGISTER,(function(t){e.visibleAuthForm="register",e.newuserTicket=t})),t.onVmLife(this,n.REQUEST_RESET_PASSWORD,(function(){e.visibleAuthForm="reset-password"})),t.onVmLife(this,n.AUTHORIZED,(function(){e.visibleAuthForm=null})),t.onVmLife(this,n.REQUEST_LOGOUT,(function(){e.$store.dispatch(T.LOGOUT)})),t.onVmLife(this,n.ALERT,(function(content,t){e.$refs.alertList.$emit("push",{content:content,type:t})})),t.onVmLife(this,n.CREATE_PIN,(function(t){e.isVisiblePinEditor="pin",e.editorProps=t})),t.onVmLife(this,n.BIND_PHONE_NUMBER,(function(t,option){e.bindPhoneMsg=t||"",e.isBindPhoneNumberModalVisible=!0,e.bindPhoneOption=option;var n=e.$getBean("eventBus");n.emit(n.eventType.LOCK_ROOT_CONTAINER_SCROLL)})),Object(I.d)(),Object(A.o)(this.handleVisibilityChange)},mountAlertList:function(){this.isAlertListVisible=!0},mountSuspensionPanel:function(){this.isSuspensionPanelVisible=!this.isPathExcluded},onBindPhoneNumberModalClose:function(){var e=this.$getBean("eventBus");this.fetchCurrentUser(),this.isBindPhoneNumberModalVisible=!1,e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},collectPageStayTime:function(){var e=0;N&&(e=new Date-N),this.$TEA("main_site_stay",{user_id:this.user?this.user.id:"unknown",page_link:window.location.href,stay_time:e}),N=0},handleVisibilityChange:function(){var e=Object(A.d)();document[e]?this.collectPageStayTime():N=new Date},closeRecommendComponent:function(){this.hideRecommendComponent=!0},closeAuthModal:function(e){this.visibleAuthForm=null,!0!==e&&this.closeRedirectParams&&this.$router.push(this.closeRedirectParams)}})}),G=(n(3884),Object(R.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"juejin"}},[e.errorView?n("ErrorView",{attrs:{"status-code":e.statusCode}}):n("router-view"),e._v(" "),e.recommendComponent?n(e.recommendComponent,{tag:"component",attrs:{logined:e.logined},on:{close:e.closeRecommendComponent}}):e._e(),e._v(" "),n("div",{staticClass:"global-component-box"},[n("ClientOnly",[e.isAlertListVisible?n("alert-list",{ref:"alertList",staticClass:"alert-list"}):e._e(),e._v(" "),e.isSuspensionPanelVisible&&e.needSuspension?n("suspension-panel",{staticClass:"suspension-panel",attrs:{"has-extension-banner":Boolean(e.recommendComponent)}}):e._e(),e._v(" "),e.isBindPhoneNumberModalVisible?n("BindPhoneModal",{attrs:{visible:e.isBindPhoneNumberModalVisible,msg:e.bindPhoneMsg,to:e.bindPhoneOption.toUrl||"",closable:e.bindPhoneOption.closable,title:e.bindPhoneOption.title,"trigger-type":e.bindPhoneOption.triggerType},on:{close:e.onBindPhoneNumberModalClose}}):e._e(),e._v(" "),e.isVisiblePinEditor?n("PinModal",{attrs:{"editor-props":e.editorProps},on:{close:function(t){e.isVisiblePinEditor=!1}}}):e._e(),e._v(" "),e.visibleAuthForm?n("AuthModal",{attrs:{type:e.visibleAuthForm,"newuser-ticket":e.newuserTicket,to:e.to,"is-from-main-page-signin-click":e.isFromMainPageSigninClick,enter_method:e.enter_method},on:{close:e.closeAuthModal}}):e._e(),e._v(" "),e.isShowVipBorrow?n("VipBorrowModal",{attrs:{"book-info":e.bookInfo,"tea-params":e.vipTeaParams},on:{closeVipBorrowModal:function(t){e.isShowVipBorrow=!1}}}):e._e()],1)],1),e._v(" "),n("ClientOnly",[n("NewUserLead",{attrs:{visible:e.newLeadVisibility},on:{close:function(t){e.newLeadVisibility=!1},finish:function(t){e.newLeadVisibility=!1}}}),e._v(" "),e.user_growth_lead?n("UserGrowthLead",{attrs:{logined:e.logined},on:{confirm:function(t){return e.handleUser_growth_leadDismiss("confirm")},dismiss:function(t){return e.handleUser_growth_leadDismiss("dismiss")}}}):e._e(),e._v(" "),e.showUserGrowthPopup||e.showUserGrowthPopup.visible?n("UserGrowthPopup",{attrs:{popup:e.showUserGrowthPopup.data},on:{dismiss:e.handleShowUserGrowthPopupDismiss}}):e._e(),e._v(" "),n("UpgradeBox",{attrs:{visible:e.isUpgradeBoxVisible.visible,user:e.user,"growth-info":e.isUpgradeBoxVisible.data},on:{close:e.handleIsUpgradeBoxVisibleDismiss}}),e._v(" "),e.isLogoutModalVisible?n("AccountDeleteModal",{attrs:{"need-qrcode":!1},on:{close:function(t){e.isLogoutModalVisible=!1}}},[e._v("\n      掘友您好，您当前登录账号正在注销审核期，故无法访问稀土掘金内容。如果需要取消注销申请，请登录稀土掘金App，进行放弃注销操作。如果您有任何建议和反馈，可以发送邮箱到\n      feedback@xitu.io 联系我们。给您带来的不便，我们深感抱歉。\n    ")]):e._e(),e._v(" "),e.reportModalData.show?n("Report",{attrs:{"item-id":e.reportModalData.itemId,"item-type":e.reportModalData.idType},model:{value:e.reportModalData.visible,callback:function(t){e.$set(e.reportModalData,"visible",t)},expression:"reportModalData.visible"}}):e._e()],1),e._v(" "),n("ClientOnly",[n("RiskModal"),e._v(" "),n("FixedResourceTccConfig",{on:{show:function(t){e.hasTccAd=!0}}}),e._v(" "),n("HomePostTccAd",{class:{"home-post-tcc-add":!0,"tcc-ad-with-recommend":!!e.recommendComponent},on:{show:function(t){e.hasTccAd=!0}}}),e._v(" "),e.loginGuideFooterVisible?n("LoginGuide",{staticClass:"login-guide-popup",attrs:{position:"footer","need-close-icon":""},on:{close:function(t){e.loginGuideFooterVisible=!1}}}):e._e(),e._v(" "),n("DarkModeNotification",{attrs:{visible:e.darkModeVisible},on:{close:e.onDarkNotificationClose,ok:e.onDarkNotificationClose}})],1)],1)}),[],!1,null,null,null));t.default=G.exports},866:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l}));var r,o,c=n(74);function l(e,t){Object(c.g)(e,t)}!function(e){e.FollowShow="follow_show",e.FollowClick="follow_click",e.FollowCancel="follow_cancel",e.FollowingFeedShow="following_feed_show"}(r||(r={})),function(e){e[e.followCommendCard=0]="followCommendCard",e[e.hotAuthors=1]="hotAuthors",e[e.homeUserPopover=2]="homeUserPopover",e[e.postUserCard=4]="postUserCard",e[e.postTop=5]="postTop",e[e.postStickyBar=6]="postStickyBar",e[e.userCenterTop=7]="userCenterTop",e[e.userCenterStickyBar=8]="userCenterStickyBar",e[e.userCenterMomentFeed=9]="userCenterMomentFeed",e[e.userCenterFollowing=10]="userCenterFollowing",e[e.userCenterTeam=11]="userCenterTeam",e[e.userCenterFollowers=12]="userCenterFollowers",e[e.commentUserPopover=13]="commentUserPopover",e[e.pinFeedUserPopover=14]="pinFeedUserPopover",e[e.pinDiggDetail=15]="pinDiggDetail",e[e.pinDetail=16]="pinDetail",e[e.clubDetail=18]="clubDetail",e[e.searchResult=19]="searchResult",e[e.teamCenterTop=20]="teamCenterTop",e[e.other=100]="other"}(o||(o={}))},871:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(7);var r=n(11),o=n(12),c=function(){function e(){Object(r.a)(this,e),this.busy=!1}return Object(o.a)(e,[{key:"do",value:function(e){var t=this;return this.busy?Promise.resolve(void 0):(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},880:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(39),n(46),n(22);var r=n(4),o=n(5),c=n(73),l=n(23),d=n(3),h=n(142),f=n(871),v=n(1),m=n(866),w=n(306);function O(){var e,t,n,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},O=Object(f.a)(),T=Object(o.x)(),C=Object(o.c)(),R=Object(o.n)(!1),j=Object(o.n)(!1),k=[],S=Object(o.n)(!1),x=Object(o.n)(""),P=Object(o.n)(l.d.UserType),E=Object(o.n)(m.b.other),M=Object(o.n)("关注失败，请稍后重试~"),I=Object(o.n)(""),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.itemId,n=e.itemType,r=e.isFollow,o=e.teaFollowType,c=e.errorText,l=e.successText;void 0!==t&&(x.value=t),void 0!==n&&(P.value=n),void 0!==r&&(S.value=r),void 0!==o&&(E.value=o),void 0!==c&&(M.value=c),void 0!==l&&(I.value=l),"boolean"==typeof r&&(j.value=!0)},A=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==C?void 0:C.proxy.$ensureAuthorized("login");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:if(!t||"string"==typeof t){e.next=10;break}return e.abrupt("return",!1);case 10:if((null!=t?t:x.value)&&(null!=n?n:P.value)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,f,v,O,y,C,j,k,L,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return O=null!=t?t:x.value,y=null!=n?n:P.value,C=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:I.value,j=null!==(f=null==r?void 0:r.errorText)&&void 0!==f?f:M.value,R.value=!0,k=!0,e.prev=10,e.next=13,_({itemId:O,itemType:y});case 13:0===(L=e.sent).err_no?(S.value=!0,C&&c.Message.success(C)):(k=!1,Object(h.b)(L.err_no)||c.Message.error(L.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),k=!1,c.Message.error(j);case 21:return R.value=!1,[l.d.UserType,l.d.Team].includes(y)&&(D=null!==(v=null==r?void 0:r.teaFollowType)&&void 0!==v?v:E.value,Object(m.c)(m.a.FollowClick,{follow_status:k?1:0,current_page:Object(w.e)(window.location.href),follow_type:D,to_item_id:O,to_item_type:y===l.d.UserType?0:1})),y===l.d.UserType&&T.dispatch(d.FOLLOW_USER),e.abrupt("return",{isSuccess:k,targetStatus:!0});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),F=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,h,f,v,O,_,C,j,k,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return v=null!=t?t:x.value,O=null!=n?n:P.value,_=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:I.value,C=null!==(h=null==r?void 0:r.errorText)&&void 0!==h?h:M.value,R.value=!0,j=!0,e.prev=10,e.next=13,y({itemId:v,itemType:O});case 13:0===(k=e.sent).err_no?(S.value=!1,_&&c.Message.success("取消".concat(_))):(j=!1,c.Message.error(k.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),j=!1,c.Message.error("取消".concat(C));case 21:return R.value=!1,[l.d.UserType,l.d.Team].includes(O)&&(L=null!==(f=null==r?void 0:r.teaFollowType)&&void 0!==f?f:E.value,Object(m.c)(m.a.FollowCancel,{follow_status:j?1:0,current_page:Object(w.e)(window.location.href),follow_type:L,to_item_id:v,to_item_type:O===l.d.UserType?0:1})),O===l.d.UserType&&T.dispatch(d.UNFOLLOW_USER),e.abrupt("return",{isSuccess:j,targetStatus:!1});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=r?r:S.value)){e.next=7;break}return e.next=4,F(t,n,o);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,D(t,n,o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),V=function(e){var t,n,r;var o=null!==(t=null==e?void 0:e.currentPage)&&void 0!==t?t:Object(w.e)(window.location.href),c=null!==(n=null==e?void 0:e.teaFollowType)&&void 0!==n?n:j.value?E.value:void 0,l=null!==(r=null==e?void 0:e.isFollow)&&void 0!==r?r:j.value?S.value:void 0;void 0!==c&&void 0!==l?Object(m.c)(m.a.FollowShow,{current_page:o,follow_type:c,button_status:l?1:0}):k.push({currentPage:o,teaFollowType:c,isFollow:l})};return L(v),Object(o.y)(j,(function(){j.value&&(k.forEach((function(e){var t=e.currentPage,n=e.teaFollowType,r=e.isFollow;V({currentPage:t,teaFollowType:null!=n?n:E.value,isFollow:null!=r?r:S.value})})),k.splice(0,k.length))})),{isFollow:S,followLoading:R,doFollow:(n=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return D(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)}),cancelFollow:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return F(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)}),toggleFollow:(e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.do((function(){return U(t,n,r,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,n,r,o){return e.apply(this,arguments)}),setFollowInfo:L,traceFollowShow:V}}function _(e){var t=e.itemId,n=e.itemType;return Object(v.d)({url:"/interact_api/v1/follow/do",method:"post",showError:!1,body:{id:t,type:n}})}function y(e){var t=e.itemId,n=e.itemType;return Object(v.d)({url:"/interact_api/v1/follow/undo",method:"post",showError:!1,body:{id:t,type:n}})}},888:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(22);var r=n(4),o=n(5);function c(){var e=Object(o.c)();return{openReportModal:function(t,n){if(e){var r=e.proxy.$getBean("eventBus");r.emit(r.eventType.REPORT_CONTENT,t,n)}}}}function l(e){var t=Object(o.m)({visible:!1,show:!1});function n(){return(n=Object(r.a)(regeneratorRuntime.mark((function n(r,o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.$validLogin()){n.next=2;break}return n.abrupt("return");case 2:t.show||(t.show=!0),t.visible=!0,t.itemId=r,t.idType=o;case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{reportModalData:t,showReportModal:function(e,t){return n.apply(this,arguments)}}}}}]);
//# sourceMappingURL=e3fba24.js.map